webpackJsonp([1],{H1UR:function(e,t,a){"use strict";var n=a("K2S4"),i=(a.n(n),a("i0We"));a.n(i)},bNWd:function(e,t,a){"use strict";var n=a("K2S4"),i=(a.n(n),a("rlHh"));a.n(i)},hKC0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("hRKE"),i=a.n(n),r=a("3cXf"),s=a.n(r),o=a("lC5x"),d=a.n(o),c=a("J0Oq"),u=a.n(c),p=(a("bNWd"),a("HD4F")),l=(a("H1UR"),a("ZE9E")),m=a("Q/W4"),v=a("0+Q0"),y=a("zN9r"),h=a("GUev"),_=a("+EaS"),f=a("4PKW"),g=a("myXI"),w=a("qTPs"),I=a("AQir"),C=a("SvN9"),b=a("bmsH"),x=a("I29D"),S=a.n(x),q=(m.a,v.a,y.a,h.a,_.a,f.a,l.a,p.a,{components:{Group:m.a,Cell:v.a,Marquee:y.a,MarqueeItem:h.a,Flexbox:_.a,FlexboxItem:f.a,vanSwipe:l.a,vanSwipeItem:p.a},data:function(){return{ads:[],images:[],current:0,clientWidth:0,code:void 0,params:{plate:"正在查询..",inTime:"正在查询..",duration:"正在查询..",price:"正在查询..",derateMoney:"正在查询..",orderId:"正在查询..",queryOrderNo:"",freeOutTime:"",departmentName:"正在查询.."},isShow:!1,disabled:!1,btnText:"立即缴费",isNoPlate:!1,errorPrice:"successTips",payType:"",isCanIn:"noCanIn",wxCode:"",bgimg:{background:"url("+a("sQkK")+") no-repeat top",backgroundSize:"100% 25%"},departmentName:void 0}},created:function(){var e=this;return u()(d.a.mark(function t(){var a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e,S.a.get("https://www.cytingchechang.com/v1/department/"+e.$route.query.dep).then(function(e){a.departmentName=e.data.data.departmentName}),S.a.get("https://ad.gateares.com/ad/adsense/getAd.do",{params:{app_key:"e4426a2764a747739c0917a2c8ad81cy",adid:1738536,goods_name:"粤B12345",poi_name:e.$route.query.dep+"_"+a.departmentName,third_merchant_id:42,ip:localStorage.getItem("Ip"),ua:navigator.userAgent}}).then(function(){var t=u()(d.a.mark(function t(n){var i,r;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.data.ads[0].ad_creative_id,t.next=3,Object(w.d)(g._0,{advId:i,type:"公众号",disLocation:"顶部",departmentId:1});case 3:1===t.sent.code&&(a.ads=n.data.ads,n.data.ads.map(function(t){var n;a.images.push(t.creative_img.creative_url),t.impression_url&&t.impression_url.length>0&&t.impression_url.map((n=u()(d.a.mark(function t(a){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get(a);case 2:case"end":return e.stop()}},t,e)})),function(e){return n.apply(this,arguments)}))}),r={type:"公众号",disLocation:"顶部",disStyle:0,happenEvent:0,advType:"车场设备广告",adPlanId:i,landingPage:a.ads[0].landing_page,advTitle:"",advSimpleInfo:"",departmentId:1},Object(w.d)(g.f,r));case 5:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}},t,e)}))()},mounted:function(){this.clientWidth=document.body.clientWidth/750*250+"px";var e={plate:localStorage.getItem("plate"),plateType:this.$route.query.plateType,departmentId:this.$route.query.dep,payScene:this.$route.query.scene,outChannelId:this.$route.query.code};if(e.plate){/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领]{1}[A-Z0-9]*$/.test(e.plate)?this.isNoPlate=!1:this.isNoPlate=!0}!0===this.isNoPlate&&(e.payScene="2"),this.queryFee(e)},methods:{clickAdvertisement:function(e){var t=this;return u()(d.a.mark(function a(){var n;return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return(n=t.ads[e]).click_url&&n.click_url.length>0&&n.click_url.mapa(function(){var e=u()(d.a.mark(function e(a){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get(a);case 2:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}()),a.next=4,Object(w.c)(g.d+n.ad_creative_id+"/1/1");case 4:window.location.href=n.landing_page;case 5:case"end":return a.stop()}},a,t)}))()},onChange:function(e){this.current=e},queryFee:function(e){var t=this;Object(w.d)(g.U,e).then(function(a){0===a.state?"2"===e.payScene?(e.payScene="1",t.queryFee(e)):(t.params={plate:e.plate,inTime:"-",duration:"-",price:a.errmsg,derateMoney:"-",orderId:"-",departmentName:"-"},t.errorPrice="errorTips"):(t.params={plate:a.car_number,inTime:Object(I.b)(1e3*a.in_time),duration:Object(I.g)(60*a.duration),price:"￥"+Object(I.e)(a.price),derateMoney:"￥"+Object(I.e)(a.derate_money),orderId:a.order_id,queryOrderNo:a.query_order_no,freeOutTime:a.free_out_time,departmentName:a.department_name},t.isShow=!0,console.info(e),"0"===e.payScene?t.payType="":t.payType=",开闸后请立即通行"),0===a.price?t.isCanIn="noCanIn":t.isCanIn="canIn"}).catch(function(a){"2"===e.payScene?(e.payScene="1",t.queryFee(e)):(t.params={plate:e.plate,inTime:"-",duration:"-",price:a,derateMoney:"-",orderId:"-",queryOrderNo:"-",departmentName:"-"},t.errorPrice="errorTips",t.isCanIn="noCanIn")})},goPay:function(){var e=this,t=this;if("noCanIn"!==this.isCanIn){var a=void 0,n=window.navigator.userAgent.toLowerCase();a=-1!==n.indexOf("micromessenger")?0:1;var r={queryOrderNo:this.params.queryOrderNo,payChannel:a,plate:localStorage.getItem("plate"),plateType:this.$route.query.plateType,departmentId:this.$route.query.dep,payScene:this.$route.query.scene,outChannelId:this.$route.query.code,userAuthCode:Object(C.b)()};this.isCanIn="noCanIn",Object(w.d)(g.T,r).then(function(n){if(n.data.epayType/1!=15)if(n.data.payUrl)window.location.href=n.data.payUrl;else if(n.data.formString){var r=document.createElement("div");r.innerHTML=n.data.formString,document.body.appendChild(r),document.forms[0].submit()}else n.data.openNativePayRequest?window.location.href="/prevPay/index.html?openNativePayRequest="+s()(n.data.openNativePayRequest):e.$vux.toast.text("下单失败,请退出重试","bottom");else 0===a?(n.data.weiXInHenanRccInfo&&(n.data.weiXInHenanRccInfo.package=n.data.weiXInHenanRccInfo.wxpackage,delete n.data.weiXInHenanRccInfo.wxpackage),t.callback(n.data.weiXInHenanRccInfo)):ap.tradePay({tradeNO:n.data.zhifuBaoHenanRccInfo.tradeNo},function(e){console.log(e),console.log(e.resultCode),console.log(i()(e.resultCode)),e.resultCode/1==9e3?(t.$vux.toast.text("支付成功","center"),setTimeout(function(){Object(b.a)(window)},1e3)):t.isCanIn="canIn"})}).catch(function(a){t.isCanIn="canIn",e.$vux.toast.text(a,"bottom")})}},callback:function(e){void 0===window.WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",this.onBridgeReady(window.WeixinJSBridge,e),!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",this.onBridgeReady(window.WeixinJSBridge,e)),document.attachEvent("onWeixinJSBridgeReady",this.onBridgeReady(window.WeixinJSBridge,e))):this.onBridgeReady(window.WeixinJSBridge,e)},readys:function(e){window.AlipayJSBridge?e&&e():document.addEventListener("AlipayJSBridgeReady",e,!1)},onBridgeReady:function(e,t){var a=this;e.invoke("getBrandWCPayRequest",t,function(e){"get_brand_wcpay_request:ok"===e.err_msg?(this.$vux.toast.text("支付成功","center"),setTimeout(function(){Object(b.a)(window)},1e3)):a.isCanIn="canIn"})}}}),k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{style:e.bgimg,attrs:{id:"app"}},[a("router-view",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:e.$route.meta.title,expression:"$route.meta.title"}]}),e._v(" "),a("div",{staticClass:"main"},[a("div",{staticClass:"card"},[a("div",{staticClass:"money",class:e.errorPrice},[e._v(e._s(e.params.price))]),e._v(" "),a("div",{staticClass:"free"},[e._v("减免:"+e._s(e.params.derateMoney))]),e._v(" "),a("div",{staticClass:"info"},[a("div",{staticClass:"item"},[a("span",[e._v("车牌号码:")]),e._v(" "),a("span",[e._v(e._s(e.params.plate))])]),e._v(" "),a("div",{staticClass:"item"},[a("span",[e._v("停车时长:")]),e._v(" "),a("span",[e._v(e._s(e.params.duration))])]),e._v(" "),a("div",{staticClass:"item"},[a("span",[e._v("入场时间:")]),e._v(" "),a("span",[e._v(e._s(e.params.inTime))])]),e._v(" "),a("div",{staticClass:"item"},[a("span",[e._v("车场名称:")]),e._v(" "),a("span",{staticClass:"bold"},[e._v(e._s(e.params.departmentName))])]),e._v(" "),a("div",{staticClass:"item"},[a("span",[e._v("订单编号:")]),e._v(" "),a("span",[e._v(e._s(e.params.orderId))])])])]),e._v(" "),e.isShow?a("div",{staticClass:"pay",class:e.isCanIn,attrs:{disabled:e.disabled},on:{click:e.goPay}},[e._v(e._s(e.btnText))]):e._e(),e._v(" "),e.isShow?a("div",{staticClass:"instruction"},[e._v("\n    请5分钟内支付"+e._s(e.payType)+"\n    ")]):e._e()]),e._v(" "),a("div",{staticClass:"banneContainer"},[e.images.length>0?a("van-swipe",{staticClass:"my-swipe",style:{height:e.clientWidth},attrs:{autoplay:3e3,"indicator-color":"white"},on:{change:e.onChange},scopedSlots:e._u([{key:"indicator",fn:function(){return[e.images.length<2?e._e():a("div",{staticClass:"custom-indicator"},[e._v("\n          "+e._s(e.current+1)+"/"+e._s(e.images.length)+"\n        ")])]},proxy:!0}],null,!1,1290587332)},e._l(e.images,function(t,n){return a("van-swipe-item",{key:t,on:{click:function(t){return e.clickAdvertisement(n)}}},[a("img",{style:{height:e.clientWidth,width:"100%"},attrs:{src:t,alt:""}})])}),1):e._e()],1)],1)},staticRenderFns:[]};var N=a("C7Lr")(q,k,!1,function(e){a("oJyX")},"data-v-14986463",null);t.default=N.exports},oJyX:function(e,t){},sQkK:function(e,t,a){e.exports=a.p+"static/img/back-type-3.9c3553b.jpg"}});